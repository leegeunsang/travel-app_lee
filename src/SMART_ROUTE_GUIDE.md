# 🚀 스마트 경로 추천 기능 가이드

## ✨ 주요 기능

### 1️⃣ 장소 선별 시스템 (Smart Place Selection)

#### 리뷰/평점 기반 필터링
- **인기 장소**: 리뷰 수 1000개 이상 + 평점 4.0 이상
  - 빨간색 배지로 표시
  - 많은 사람들이 방문한 검증된 장소
  
- **숨은 명소**: 리뷰 수 100개 미만 + 평점 4.5 이상
  - 보라색 배지로 표시
  - 현지인이 추천하는 한적한 장소
  - "한적한", "조용한", "현지인 추천" 키워드 포함

- **고평점 장소**: 평점 4.5 이상
  - 노란색 배지로 표시
  - 만족도가 높은 장소

#### 여행 성향 기반 추천
- **힐링형**: 
  - 리뷰 수 1500개 미만 & 평점 4.5 이상
  - 한적하고 조용한 장소 우선
  - 카페, 공원, 숙박, 레스토랑 중심
  
- **관광형**: 
  - 리뷰 수 500개 이상 & 평점 4.0 이상
  - 인기 있는 대표 명소 우선
  - 관광명소, 박물관, 레스토랑, 숙박 중심
  
- **액티비티형**: 
  - 야외 활동 장소 우선
  - 액티비티, 레스토랑, 공원, 숙박 중심

#### 날씨 기반 조정
- **비 오는 날**: 실내 장소(카페, 레스토랑, 박물관, 쇼핑, 숙박) 우선
- **좋은 날씨**: 야외 장소(공원, 관광명소, 액티비티) 포함
- **추운 날씨** (5°C 이하): 실내 장소 우선

---

### 2️⃣ 경로 계산 시스템 (Route Calculation)

#### 교통 수단별 계산
- **도보**: 평균 속도 4km/h
  - 가까운 거리 이동에 적합
  - 최소 이동 시간 5분

- **대중교통**: 평균 속도 30km/h
  - 도시 내 이동에 최적
  - 환승 시간 포함

- **자동차**: 평균 속도 40km/h
  - 장거리 이동에 적합
  - 주차 시간 고려

#### 성향별 시간 조정
- **힐링형**: 이동 시간 1.3배 여유 있게 계산
  - 느긋한 일정으로 구성
  - 장소당 평균 3시간 체류
  
- **관광형**: 표준 시간으로 계산
  - 효율적인 동선
  - 장소당 평균 2시간 체류
  
- **액티비티형**: 표준 시간으로 계산
  - 체험 중심 일정
  - 장소당 평균 2.5시간 체류

#### 추천 일정 계산
- **반나절 코스**: 총 소요 시간 6시간 미만
- **1일 코스**: 총 소요 시간 6~10시간
- **1박 2일 코스**: 총 소요 시간 10시간 이상

---

### 3️⃣ 장소 고정 기능 (Place Locking)

#### 사용 방법
1. 원하는 장소의 **자물쇠 아이콘** 클릭
2. 고정된 장소는 **파란색 테두리**로 표시
3. 새로고침 시 고정하지 않은 장소만 변경

#### 활용 예시
- 꼭 가고 싶은 맛집을 경로에 고정
- 예약한 숙소를 일정에 포함
- 특정 관광지를 반드시 방문하도록 설정

---

### 4️⃣ 새로고침 기능 (Place Rotation)

#### 작동 방식
- **새로고침 버튼** 클릭 시:
  - 고정하지 않은 장소를 다른 장소로 교체
  - 카테고리별 차상위 장소 추천
  - 같은 카테고리 내에서 순환

#### 활용 팁
- 마음에 드는 장소가 나올 때까지 여러 번 시도
- 일부 장소는 고정하고 나머지만 교체 가능
- 모든 장소 고정 시 새로고침 불가 (토스트 알림)

---

## 📊 데이터 구조

### 장소 정보
```typescript
{
  id: string              // 고유 ID
  name: string            // 장소명
  category: string        // 카테고리 (카페, 레스토랑 등)
  reviewCount: number     // 리뷰 수
  rating: number          // 평점 (1.0 ~ 5.0)
  description: string     // 설명
  address: string         // 주소
  isIndoor: boolean       // 실내 여부
  isOutdoor: boolean      // 야외 여부
  keywords: string[]      // 키워드 (숨은명소, 인기장소 등)
  lat: number             // 위도
  lng: number             // 경도
  locked?: boolean        // 고정 여부
}
```

### 경로 정보
```typescript
{
  from: string            // 출발지
  to: string              // 도착지
  distance: number        // 거리 (미터)
  distanceText: string    // 거리 (텍스트: "1.2km")
  time: number            // 시간 (분)
  timeText: string        // 시간 (텍스트: "15분")
  transportMode: string   // 교통 수단
}
```

---

## 🔧 API 연동 가이드

### 카카오 REST API 키 설정 시
서버에서 실제 카카오 로컬 API 사용:
- 장소 검색 API로 실제 장소 데이터 가져오기
- 리뷰/평점 정보 수집
- Directions API로 실제 경로 계산

### 현재 (Mock 데이터)
- 10개 카테고리 × 10개 장소 = 100개 Mock 장소
- 리뷰 수 & 평점 랜덤 생성
- 거리/시간 계산식으로 추정

---

## 💡 활용 시나리오

### 시나리오 1: 제주도 힐링 여행
1. **여행 성향**: 힐링형 선택
2. **날씨**: 맑음 20°C
3. **결과**:
   - 한적한 카페 (리뷰 87개, 평점 4.7)
   - 숨은 공원 (리뷰 45개, 평점 4.8)
   - 조용한 레스토랑 (리뷰 123개, 평점 4.6)
   - 뷰 좋은 펜션 (리뷰 234개, 평점 4.5)
4. **경로**: 대중교통 / 1일 코스 / 총 15.3km

### 시나리오 2: 서울 관광
1. **여행 성향**: 관광형 선택
2. **날씨**: 비 12°C
3. **결과**:
   - 실내 박물관 우선 추천 (리뷰 1500개, 평점 4.3)
   - 인기 쇼핑몰 (리뷰 2300개, 평점 4.1)
   - 유명 맛집 (리뷰 890개, 평점 4.4)
   - 도심 호텔 (리뷰 1100개, 평점 4.2)
4. **경로**: 자동차 / 1일 코스 / 총 22.5km

### 시나리오 3: 부산 액티비티
1. **여행 성향**: 액티비티형 선택
2. **날씨**: 맑음 18°C
3. **결과**:
   - 해변 서핑 (리뷰 456개, 평점 4.6)
   - 등산 코스 (리뷰 678개, 평점 4.5)
   - 현지 맛집 (리뷰 890개, 평점 4.7)
   - 글램핑장 (리뷰 234개, 평점 4.8)
4. **경로**: 렌터카 / 1일 코스 / 총 35.7km

---

## 🎯 향후 개선 계획

### API 연동
- [ ] 카카오 로컬 API - 실제 장소 검색
- [ ] 카카오 Directions API - 실제 경로 계산
- [ ] 네이버 리뷰 크롤링 - 실제 리뷰/평점 수집

### 기능 추가
- [ ] 지도 위 경로 시각화
- [ ] 경로 저장 & 공유
- [ ] 시간대별 일정 자동 생성
- [ ] 예산 계산 기능
- [ ] 동행자 추천 (인원 수에 맞는 장소)

### 알고리즘 개선
- [ ] ML 기반 개인화 추천
- [ ] 교통 혼잡도 반영
- [ ] 영업시간 고려
- [ ] 계절별 추천 장소 변경

---

## ❓ FAQ

**Q: 모든 장소를 고정하고 새로고침하면?**
A: "모든 장소가 고정되어 있습니다" 토스트 메시지 표시

**Q: 날씨 정보가 없으면?**
A: 실내/야외 구분 없이 성향 기반으로만 추천

**Q: API 키 없이도 사용 가능한가?**
A: 예, Mock 데이터로 모든 기능 사용 가능

**Q: 장소를 직접 추가할 수 있나?**
A: 현재는 불가능, 향후 "커스텀 장소 추가" 기능 개발 예정

**Q: 경로를 저장할 수 있나?**
A: 로그인 후 "일정 저장" 기능 사용 (ProfilePage → ItineraryPage)

---

**🎉 스마트 경로 추천 기능을 활용하여 완벽한 여행 계획을 세워보세요!**
